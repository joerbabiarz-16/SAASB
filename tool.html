<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SaaS Sales Interview Prep Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        function SaaSSalesInterviewTool() {
          const [messages, setMessages] = useState([]);
          const [input, setInput] = useState('');
          const [isLoading, setIsLoading] = useState(false);
          const [stage, setStage] = useState('welcome');
          const [userData, setUserData] = useState({});
          const [narrative, setNarrative] = useState(null);
          const messagesEndRef = useRef(null);

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          useEffect(() => {
            setMessages([{
              type: 'ai',
              content: `ðŸ‘‹ Welcome. I'm here to help you break into software salesâ€”even if you've never sold software before.

I've helped dozens of teachers, retail managers, hospitality workers, and career changers land their first SDR, BDR, or AE roles at top SaaS companies.

This will take about 15 minutes. I'll ask you specific questions about your background, and then build you a personalized interview playbook that translates your experience into sales language.

**Let's start: What's your name, and what's your current role/industry?**

(For example: "I'm Alex, I'm a restaurant manager" or "I'm Jordan, I teach high school math")`
            }]);
          }, []);

          const questionsFlow = {
            welcome: {
              next: 'target',
              prompt: (data) => `Got it, ${data.name}. 

**What SaaS sales role are you targeting?** 

Are you looking for SDR/BDR (outbound prospecting), Inbound SDR, or Account Executive? Any specific companies you're interviewing with or hoping to join?`
            },
            target: {
              next: 'customer_experience',
              prompt: () => `Perfect. Now let's talk about your transferable experience.

**Describe your customer-facing or relationship-building experience.** 

This could be anything: handling difficult customers, solving problems, building trust, managing accounts, teaching, coachingâ€”whatever you've done that involves working with people. Be specific with examples.`
            },
            customer_experience: {
              next: 'metrics',
              prompt: () => `Great. Every sales role has targets and metrics.

**Tell me about a time you had to hit a goal, meet a deadline, or achieve something measurable.** 

This doesn't need to be a "sales quota"â€”it could be project deadlines, student performance goals, customer satisfaction scores, revenue targets in retail, anything where you were accountable for results.`
            },
            metrics: {
              next: 'learning',
              prompt: () => `Excellent. SaaS companies hire for coachability and learning speed.

**Tell me about a time you had to learn something completely new and succeed quickly.** 

Maybe you learned a new system, switched roles, picked up a skill, or adapted to major change. What was the situation and how did you handle it?`
            },
            learning: {
              next: 'rejection',
              prompt: () => `Good. Now let's talk about resilienceâ€”because sales is full of rejection.

**What are you willing to "suffer" for in a sales role?** 

Be honest: Are you okay with cold calling? Hearing "no" constantly? Long hours during quarter-end? High-pressure environments? What discomfort are you genuinely willing to push through to succeed?`
            },
            rejection: {
              next: 'why_sales',
              prompt: () => `I appreciate the honesty. Now the question every hiring manager will ask:

**Why sales? And why now?** 

What attracts you to software sales specifically? (And please don't just say moneyâ€”they want to know what about the *work itself* appeals to you.)`
            },
            why_sales: {
              next: 'preparation',
              prompt: () => `Perfect. This next one separates serious candidates from tire-kickers.

**What have you done to prepare for this transition?** 

Have you read any sales books? Taken courses? Listened to podcasts? Followed sales leaders? Practiced cold calling? The specifics matterâ€”this shows intentionality.`
            },
            preparation: {
              next: 'concern',
              prompt: () => `Almost done. Last question:

**What's your biggest concern about interviewing for SaaS sales roles?** 

What part of your background worries you? What objection do you expect from hiring managers? What keeps you up at night about this transition?`
            },
            concern: {
              next: 'generate',
              prompt: () => null
            }
          };

          const handleSend = async () => {
            if (!input.trim() || isLoading) return;

            const userMessage = input.trim();
            setInput('');
            
            setMessages(prev => [...prev, { type: 'user', content: userMessage }]);
            setIsLoading(true);

            let newData = { ...userData };
            
            if (stage === 'welcome') {
              newData.rawIntro = userMessage;
              newData.name = userMessage.split(/[,\n]/)[0].replace(/my name is|i'm|i am|hi|hello/gi, '').trim();
              newData.currentRole = userMessage;
            } else if (stage === 'target') {
              newData.targetRole = userMessage;
            } else if (stage === 'customer_experience') {
              newData.customerExperience = userMessage;
            } else if (stage === 'metrics') {
              newData.metrics = userMessage;
            } else if (stage === 'learning') {
              newData.learning = userMessage;
            } else if (stage === 'rejection') {
              newData.resilience = userMessage;
            } else if (stage === 'why_sales') {
              newData.whySales = userMessage;
            } else if (stage === 'preparation') {
              newData.preparation = userMessage;
            } else if (stage === 'concern') {
              newData.concern = userMessage;
            }

            setUserData(newData);

            const nextStage = questionsFlow[stage].next;
            
            if (nextStage === 'generate') {
              await generateNarrative(newData);
            } else {
              setStage(nextStage);
              const nextPrompt = questionsFlow[stage].prompt(newData);
              
              setTimeout(() => {
                setMessages(prev => [...prev, { type: 'ai', content: nextPrompt }]);
                setIsLoading(false);
              }, 800);
            }
          };

          const generateNarrative = async (data) => {
            setMessages(prev => [...prev, { 
              type: 'ai', 
              content: `ðŸŽ¯ **Analyzing your background and building your SaaS sales interview playbook...**

This takes about 45 seconds. I'm translating your experience into sales competencies and crafting responses that will make hiring managers see you as the candidate they've been looking for.` 
            }]);

            try {
              const response = await fetch('/api/generate-narrative', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ data })
              });

              if (!response.ok) {
                throw new Error('Failed to generate narrative');
              }

              const responseData = await response.json();
              const narrativeContent = responseData.narrative;

              setNarrative(narrativeContent);
              setMessages(prev => [...prev, { 
                type: 'ai', 
                content: `âœ… **Your SaaS Sales Interview Playbook is Ready!**

---

${narrativeContent}

---

## ðŸŽ¯ What to Do Next

1. **Read this through 2-3 times** - Let these themes sink in
2. **Practice out loud** - Don't memorize word-for-word, but get comfortable with the themes
3. **Record yourself** - Use your phone, watch it back, refine
4. **Customize for each company** - Use this framework but research each company specifically
5. **Download and save** - Use the button above to keep this for reference

Remember: Hiring managers don't want perfection. They want authenticity, coachability, and hunger. You have all three.

**You've got this. Now go land that role.**` 
              }]);
              setIsLoading(false);
            } catch (error) {
              setMessages(prev => [...prev, { 
                type: 'ai', 
                content: `âŒ I encountered an error generating your playbook. Please try again or contact support if this persists.\n\nError: ${error.message}` 
              }]);
              setIsLoading(false);
            }
          };

          const downloadNarrative = () => {
            if (!narrative) return;
            
            const content = `# ${userData.name}'s SaaS Sales Interview Playbook
Generated: ${new Date().toLocaleDateString()}

---

${narrative}

---

Built by Breaking Into SaaS
`;
            
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${userData.name}_SaaS_Interview_Playbook.md`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          };

          const resetTool = () => {
            setMessages([{
              type: 'ai',
              content: `ðŸ‘‹ Ready to build another playbook?\n\n**What's your name, and what's your current role/industry?**`
            }]);
            setStage('welcome');
            setUserData({});
            setNarrative(null);
          };

          return (
            <div className="flex flex-col h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50">
              <div className="bg-white shadow-md border-b-2 border-blue-600 p-4">
                <div className="max-w-4xl mx-auto flex justify-between items-center">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 bg-gradient-to-br from-blue-900 to-blue-600 rounded-lg flex items-center justify-center">
                      <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                    </div>
                    <div>
                      <h1 className="text-2xl font-bold text-gray-900">Breaking Into SaaS</h1>
                      <p className="text-sm text-gray-600">Interview Prep for Career Changers</p>
                    </div>
                  </div>
                  {narrative && (
                    <div className="flex gap-2">
                      <button
                        onClick={downloadNarrative}
                        className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                      >
                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        Download
                      </button>
                      <button
                        onClick={resetTool}
                        className="flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium"
                      >
                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        New
                      </button>
                    </div>
                  )}
                </div>
              </div>

              <div className="flex-1 overflow-y-auto p-4">
                <div className="max-w-4xl mx-auto space-y-4">
                  {messages.map((message, index) => (
                    <div
                      key={index}
                      className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}
                    >
                      <div
                        className={`max-w-3xl rounded-2xl px-6 py-4 ${
                          message.type === 'user'
                            ? 'bg-blue-600 text-white shadow-lg'
                            : 'bg-white text-gray-900 shadow-md border border-gray-100'
                        }`}
                      >
                        <div className="whitespace-pre-wrap prose prose-sm max-w-none">
                          {message.content.split('\n').map((line, i) => {
                            if (line.includes('**')) {
                              const parts = line.split(/\*\*(.*?)\*\*/g);
                              return (
                                <p key={i} className={`mb-2 ${message.type === 'user' ? 'text-white' : ''}`}>
                                  {parts.map((part, j) => 
                                    j % 2 === 1 ? <strong key={j}>{part}</strong> : part
                                  )}
                                </p>
                              );
                            }
                            if (line.startsWith('# ')) {
                              return <h1 key={i} className="text-2xl font-bold mt-6 mb-3 text-blue-900">{line.slice(2)}</h1>;
                            }
                            if (line.startsWith('## ')) {
                              return <h2 key={i} className="text-xl font-bold mt-5 mb-2 text-blue-800">{line.slice(3)}</h2>;
                            }
                            if (line.startsWith('### ')) {
                              return <h3 key={i} className="text-lg font-bold mt-4 mb-2 text-blue-700">{line.slice(4)}</h3>;
                            }
                            if (line.trim().startsWith('- ')) {
                              return <li key={i} className="ml-4 mb-1">{line.slice(2)}</li>;
                            }
                            if (line.trim().startsWith('---')) {
                              return <hr key={i} className="my-4 border-gray-300" />;
                            }
                            return line ? <p key={i} className="mb-2">{line}</p> : <br key={i} />;
                          })}
                        </div>
                      </div>
                    </div>
                  ))}
                  {isLoading && (
                    <div className="flex justify-start">
                      <div className="bg-white rounded-2xl px-6 py-4 shadow-md border border-gray-100">
                        <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"></div>
                      </div>
                    </div>
                  )}
                  <div ref={messagesEndRef} />
                </div>
              </div>

              {!narrative && (
                <div className="bg-white border-t-2 border-gray-200 p-4 shadow-lg">
                  <div className="max-w-4xl mx-auto">
                    <div className="flex gap-3">
                      <input
                        type="text"
                        value={input}
                        onChange={(e) => setInput(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                        placeholder="Type your response here..."
                        className="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        disabled={isLoading}
                      />
                      <button
                        onClick={handleSend}
                        disabled={isLoading || !input.trim()}
                        className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-medium shadow-md"
                      >
                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                        </svg>
                        Send
                      </button>
                    </div>
                    <p className="text-xs text-gray-500 mt-2 text-center">
                      Be specific and honest. The more detail you provide, the better your playbook will be.
                    </p>
                  </div>
                </div>
              )}
            </div>
          );
        }

        ReactDOM.render(<SaaSSalesInterviewTool />, document.getElementById('root'));
    </script>
</body>
</html>
